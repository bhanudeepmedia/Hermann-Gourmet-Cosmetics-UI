{% comment %}
  Hermann Header - Zielinski & Rozen Style Replica
{% endcomment %}

<header class="site-header" style="background-color: #263112; position: sticky; top: 0; z-index: 1000; padding: 10px 0;">
  
  <div class="header-bar container">
    
    <!-- LEFT: Menu Trigger & Label -->
    <div class="header-left">
        <button class="zielinski-menu-trigger" aria-label="Open Menu">
            <span class="close-icon" style="display:none;">✕</span>
            <span class="hamburger-icon">
                <span></span><span></span><span></span>
            </span>
            <span class="menu-label">MENU</span>
        </button>
    </div>

    <!-- CENTER: Logo -->
    <div class="header-center logo-wrapper">
      <a href="{{ routes.root_url }}">
        {% if section.settings.logo %}
          {% comment %} Logo needs to be white/inverted for dark background {% endcomment %}
          <img src="{{ section.settings.logo | img_url: '400x' }}" alt="{{ shop.name }}" class="logo-img">
        {% else %}
          <span class="logo-text">{{ section.settings.logo_text }}</span>
        {% endif %}
      </a>
    </div>

    <!-- RIGHT: Icons (Minimal) -->
    <div class="header-right icons-wrapper">
       <span class="currency-label desktop-only">EN (EUR/€)</span>
       <a href="{{ routes.search_url }}" class="icon-link"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line></svg></a>
       <a href="{{ routes.account_url }}" class="icon-link desktop-only"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path></svg></a>
       <a href="{{ routes.cart_url }}" class="icon-link"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M6 2L3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4z"></path><line x1="3" y1="6" x2="21" y2="6"></line></svg></a>
    </div>
  </div>

  <!-- ZIELINSKI SIDEBAR MENU overlay -->
  <div class="zielinski-menu-overlay">
      <div class="menu-container container">
          
          <!-- Close Button Top Left -->
          <button class="close-overlay-btn">✕ &nbsp; MENU</button>

          <div class="menu-columns">
              <!-- Left Column: Primary Roots (Bold Uppercase) -->
              <div class="menu-roots">
                 <ul class="root-list">
                    <li class="root-item"><a href="/" class="root-link active">HOMEPAGE</a></li>
                    {% for link in linklists[section.settings.menu].links %}
                       <li class="root-item" data-index="{{ forloop.index }}">
                           <a href="{{ link.url }}" class="root-link">{{ link.title }}</a>
                       </li>
                    {% endfor %}
                 </ul>
              </div>

              <!-- Right Column: Subcategories (Contextual or All) -->
              <div class="menu-details">
                  {% for link in linklists[section.settings.menu].links %}
                    {% if link.links != blank %}
                       <div class="detail-group" data-parent="{{ forloop.index }}">
                          <h4 class="detail-title">{{ link.title }}</h4>
                          <ul class="detail-list">
                             {% for child in link.links %}
                               <li><a href="{{ child.url }}">{{ child.title }}</a></li>
                             {% endfor %}
                             <li><a href="{{ link.url }}" class="discover-all">Discover All</a></li>
                          </ul>
                       </div>
                    {% endif %}
                  {% endfor %}
              </div>
          </div>
      </div>
  </div>

  <!-- Search Modal -->
  <div class="search-modal">
      <div class="container relative">
          <form action="{{ routes.search_url }}" method="get">
              <input type="text" name="q" placeholder="Search..." autofocus>
              <button type="submit">SEARCH</button>
          </form>
          <button class="close-search">✕</button>
      </div>
  </div>

</header>

<style>
/* --- BASE HEADER --- */
.site-header { font-family: 'Fraunces', serif; background: #263112; border-bottom: none; } /* Dark Olive Background, No Border */
.header-bar { display: flex; justify-content: space-between; align-items: center; height: 60px; color: white; }

.header-left, .header-right { flex: 1; display: flex; align-items: center; }
.header-right { justify-content: flex-end; gap: 1.5rem; }
.header-center { flex: 2; text-align: center; }

/* Trigger with Text */
.zielinski-menu-trigger {
    background: none; border: none; cursor: pointer;
    display: flex; align-items: center; gap: 12px;
    font-family: 'Outfit', sans-serif; font-weight: 500; font-size: 0.8rem; letter-spacing: 1px; color: white; /* White Text */
}
.hamburger-icon span { display: block; width: 22px; height: 2px; background: white; margin: 4px 0; } /* White Lines */

.logo-text { font-family: 'Fraunces', serif; font-size: 2rem; letter-spacing: 1px; color: white; text-transform: uppercase; } /* White Logo */
.logo-img { max-height: 50px; filter: brightness(0) invert(1); } /* Make valid logo white if clear png */

.icon-link { color: white; display: flex; align-items: center; } /* White Icons */
.currency-label { font-family: 'Outfit', sans-serif; font-size: 0.75rem; font-weight: 600; margin-right: 10px; color: rgba(255,255,255,0.8); }

/* --- ZIELINSKI OVERLAY --- */
.zielinski-menu-overlay {
    position: fixed; top: 0; left: 0; width: 450px; /* Sidebar Width */
    height: 100vh;
    background: #FDFBF7; /* Beige */
    z-index: 2000;
    transform: translateX(-100%);
    transition: transform 0.5s cubic-bezier(0.16, 1, 0.3, 1);
    border-right: 1px solid rgba(0,0,0,0.05);
    overflow-y: auto;
}
.zielinski-menu-overlay.active { transform: translateX(0); box-shadow: 10px 0 50px rgba(0,0,0,0.1); }

.menu-container { padding: 3rem 2rem; }
.close-overlay-btn {
    background: none; border: none; font-size: 0.9rem; font-weight: 600; letter-spacing: 1px; cursor: pointer; margin-bottom: 3rem;
    display: flex; align-items: center; gap: 10px; font-family: 'Outfit', sans-serif;
}

.menu-columns { display: flex; gap: 3rem; }

/* Left Column: Roots */
.root-list { list-style: none; padding: 0; margin: 0; }
.root-item { margin-bottom: 0.8rem; }
.root-link {
    font-family: 'Fraunces', serif;
    font-weight: 700;
    font-size: 1.4rem;
    color: #2C2623;
    text-decoration: none;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    opacity: 0.7;
    transition: opacity 0.2s;
}
.root-link:hover, .root-link.active { opacity: 1; text-decoration: underline; text-decoration-thickness: 2px; text-underline-offset: 4px; }

/* Right Column: Details */
.menu-details { padding-top: 0.5rem; flex: 1; }
.detail-group { margin-bottom: 2.5rem; }
.detail-title { 
    font-family: 'Outfit', sans-serif; font-weight: 600; font-size: 0.7rem; letter-spacing: 1px; 
    text-transform: uppercase; margin-bottom: 1rem; color: #666; 
}
.detail-list { list-style: none; padding: 0; }
.detail-list li { margin-bottom: 0.5rem; }
.detail-list a { 
    font-family: 'Outfit', sans-serif; font-size: 0.9rem; color: #2C2623; text-decoration: none; 
}
.detail-list a:hover { text-decoration: underline; }
.discover-all { font-weight: 600; margin-top: 5px; display: inline-block; font-size: 0.85rem; }


/* Search Modal */
.search-modal {
    position: fixed; top: 0; left: 0; width: 100%; height: 300px;
    background: #FDFBF7; border-bottom: 1px solid rgba(0,0,0,0.1);
    z-index: 2100; transform: translateY(-100%); transition: transform 0.4s;
    display: flex; align-items: center; justify-content: center;
}
.search-modal.active { transform: translateY(0); }
.search-modal input {
    background: transparent; border: none; border-bottom: 2px solid #2C2623; width: 100%; font-size: 2rem;
    font-family: 'Fraunces', serif; padding: 10px 0; outline: none;
}
.close-search { position: absolute; top: 2rem; right: 2rem; font-size: 1.5rem; background:none; border:none; cursor: pointer; }


/* MOBILE */
@media (max-width: 900px) {
    .zielinski-menu-overlay { width: 100%; }
    .menu-columns { flex-direction: column; gap: 2rem; }
    .header-bar { padding: 0 1rem; }
    .desktop-only { display: none; }
}
</style>

<script>
  // Menu Logic
  const menuTrigger = document.querySelector('.zielinski-menu-trigger');
  const menuOverlay = document.querySelector('.zielinski-menu-overlay');
  const closeMenuBtn = document.querySelector('.close-overlay-btn');

  if(menuTrigger) {
      menuTrigger.addEventListener('click', () => menuOverlay.classList.add('active'));
      closeMenuBtn.addEventListener('click', () => menuOverlay.classList.remove('active'));
  }

  // Search Logic
  const searchLink = document.querySelector('a[href="{{ routes.search_url }}"]');
  const searchModal = document.querySelector('.search-modal');
  const closeSearch = document.querySelector('.close-search');

  if(searchLink) {
      searchLink.addEventListener('click', (e) => {
          e.preventDefault();
          searchModal.classList.add('active');
          searchModal.querySelector('input').focus();
      });
      closeSearch.addEventListener('click', () => searchModal.classList.remove('active'));
  }
</script>

{% schema %}
{
  "name": "Zielinski Style Header",
  "settings": [
    { "type": "color", "id": "bg_color", "label": "Background", "default": "#FDFBF7" },
    { "type": "image_picker", "id": "logo", "label": "Logo" },
    { "type": "text", "id": "logo_text", "label": "Logo Text", "default": "HERMANN" },
    { "type": "link_list", "id": "menu", "label": "Menu", "default": "main-menu" }
  ]
}
{% endschema %}
