<header class="site-header" style="background: {{ section.settings.bg_color }}; padding: 1rem 0;">
  <div class="container" style="display: flex; justify-content: space-between; align-items: center;">
    
    <!-- Mobile Toggle -->
    <button id="mobile-toggle-btn" style="background:none; border:none; font-size:1.5rem; display: none;">☰</button>

    <!-- Navigation Left -->
    <nav class="desktop-nav">
      <ul style="display: flex; gap: 2rem; list-style: none; margin: 0; padding: 0;">
        {% for link in linklists[section.settings.menu].links %}
          <li><a href="{{ link.url }}" style="text-decoration: none; color: {{ section.settings.text_color }}; text-transform: uppercase; font-size: 0.9rem;">{{ link.title }}</a></li>
        {% endfor %}
      </ul>
    </nav>

    <!-- Logo -->
    <div class="logo" style="font-size: 1.5rem; font-weight: bold; color: {{ section.settings.text_color }};">
      <a href="{{ routes.root_url }}" style="color: inherit; text-decoration: none;">
        {% if section.settings.logo %}
          <img src="{{ section.settings.logo | img_url: '200x' }}" alt="{{ shop.name }}">
        {% else %}
          {{ section.settings.logo_text }}
        {% endif %}
      </a>
    </div>

    <!-- Icons -->
    <div class="icons" style="display: flex; gap: 1rem;">
      <a href="{{ routes.search_url }}" style="color: {{ section.settings.text_color }};">Search</a>
      <a href="{{ routes.cart_url }}" style="color: {{ section.settings.text_color }};">Cart ({{ cart.item_count }})</a>
    </div>

  </div>

  <!-- Mobile Drawer Scaffolding -->
  <div id="mobile-drawer-overlay" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:white; z-index:9999; padding:2rem;">
      <button id="close-drawer" style="float:right; background:none; border:none; font-size:1.5rem;">✕</button>
      <ul style="list-style:none; padding:0; margin-top:3rem;">
        {% for link in linklists[section.settings.menu].links %}
          <li style="margin-bottom:1rem;"><a href="{{ link.url }}" style="font-size:1.5rem; color:black; text-decoration:none;">{{ link.title }}</a></li>
        {% endfor %}
      </ul>
  </div>

</header>

<style>
  @media(max-width: 768px) {
    .desktop-nav { display: none; }
    #mobile-toggle-btn { display: block !important; }
  }
</style>

<script>
  document.getElementById('mobile-toggle-btn').addEventListener('click', function() {
    document.getElementById('mobile-drawer-overlay').style.display = 'block';
  });
  document.getElementById('close-drawer').addEventListener('click', function() {
    document.getElementById('mobile-drawer-overlay').style.display = 'none';
  });
</script>

{% schema %}
{
  "name": "Main Header",
  "settings": [
    { "type": "color", "id": "bg_color", "label": "Background", "default": "#ffffff" },
    { "type": "color", "id": "text_color", "label": "Text", "default": "#000000" },
    { "type": "image_picker", "id": "logo", "label": "Logo" },
    { "type": "text", "id": "logo_text", "label": "Logo Text", "default": "HERMANN" },
    { "type": "link_list", "id": "menu", "label": "Menu", "default": "main-menu" }
  ]
}
{% endschema %}
